{% load humanize %}
{% load static %}

<article class="bg-white rounded-2xl border border-gray-200 hover:shadow-xl transition-shadow duration-300 overflow-hidden flex flex-col">
	<!-- Product Image & Badges -->
	<div class="relative aspect-[4/3] bg-gradient-to-br from-green-50 to-blue-50 overflow-hidden">
		{% if product.thumbnail %}
			<img src="{{ product.thumbnail }}" alt="{{ product.name }}" class="w-full h-full object-cover rounded-t-2xl">
		{% else %}
			<img src="{% static 'image/no-product.png' %}" alt="No image" class="w-full h-full object-contain opacity-60 rounded-t-2xl">
		{% endif %}

		<!-- Category Badge -->
		<div class="absolute top-3 left-3">
			<span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-green-500 text-white shadow">
				{{ product.get_category_display }}
			</span>
		</div>

		<!-- Status Badges -->
		<div class="absolute top-3 right-3 flex flex-col gap-2 items-end">
			{% if product.is_featured %}
				<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-yellow-400 text-yellow-900 shadow">â˜… Featured</span>
			{% endif %}
			{% if product.stock == 0 %}
				<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-red-500 text-white shadow">Out of Stock</span>
			{% endif %}
		</div>
	</div>

	<!-- Product Content -->
	<div class="flex-1 flex flex-col p-5">
		<h3 class="text-xl font-extrabold text-gray-900 mb-1 leading-tight">
			<a href="{% url 'main:show_product' product.id %}" class="hover:text-green-600 transition-colors">
				{{ product.name }}
			</a>
		</h3>
		<div class="flex items-center text-sm text-gray-500 mb-2">
			<span class="font-medium text-gray-700">Brand:</span>
			<span class="ml-1 font-semibold text-green-700">{{ product.brand }}</span>
		</div>
		<p class="text-gray-600 text-sm mb-4 line-clamp-2">{{ product.description|truncatewords:18 }}</p>

		<!-- Price Highlight -->
		<div class="mb-4">
			<span class="text-2xl font-black text-green-600 drop-shadow-sm">${{ product.price|intcomma }}</span>
		</div>

		<div class="mt-auto pt-4 border-t border-gray-100 flex items-center justify-between">
			<a href="{% url 'main:show_product' product.id %}" class="text-green-700 hover:text-green-900 font-bold text-base transition-colors">
				View Details
			</a>
			{% if user.is_authenticated and user == product.user %}
				<div class="flex space-x-2">
					<a href="{% url 'main:edit_product' product.id %}" class="text-gray-600 hover:text-gray-900 text-sm font-semibold transition-colors">Edit</a>
					<a href="{% url 'main:delete_product' product.id %}" class="text-red-600 hover:text-red-800 text-sm font-semibold transition-colors" onclick="return confirm('Are you sure you want to delete this product?');">Delete</a>
				</div>
			{% endif %}
		</div>
	</div>
</article>
